



### 环境准备

#### Node

在当前大前端时代，Node.JS是前端开发必备的开发依赖，往往前端安装的第一个环境就是Node.JS，那么我们也从Node.JS开始
截至到2021年1月4日，[Node.JS官网](https://nodejs.org/en/)的LTS版本为<font style="color:#f03d3d">14.51.1</font>，最新版本为<font style="color:#f03d3d">15.4.0</font>

<img src=".//images//image-20201215331211.png" width="400">

cli打包其实并不需要特别新的Node版本，所以也不需要特别激进的使用新版本，在此使用最新版的LTS版本即可。


安装Node其实还有一个更好的选择，那就是使用[NVM](https://github.com/nvm-sh/nvm)工具，NVM是一个Node版本管理工具，这个工具允许同时存在多个Node版本，并且轻易的切换。例如我司一个老项目依赖Node.11版本，但是现在像有些CSS包依赖Node.12/Node.14这样的版本，所以我本地装了多个Node版本，方便切换。

<img src=".//images//image-2020121533121.png" width="400">

关于NVM则不在此进行叙说，网上具有好多这样的[文章](https://www.cnblogs.com/gaozejie/p/10689742.html)，都很详细，至于其用法，就是<font style="color:#f03d3d">nvm install</font>、<font style="color:#f03d3d">nvm use</font>、<font style="color:#f03d3d">nvm ls</font> 这些命令，死语法。



#### NPM

npm是Node下的一个包管理工具, 安装Node.Js时会默认安装npm，用过后端的朋友会知道Java的<font style="color:#f03d3d">maven</font>或者.Net的<font style="color:#f03d3d">NuGet</font> , npm其实跟这些包管理工具一样。

Node官方提供的一个[公共仓库](https://www.npmjs.com/)，里面具有海量的工具包，以方便程序员进行开发，npm默认是从其公共仓库进行管理，有的公司也会搭建私服仓库，承载公司私有包。不过一般开发学习都是使用公共仓库即可。

使用npm时一般都需要配置国内镜像源，毕竟国外网速是个问题，配置镜像源网速也具有许多的[文章](https://www.cnblogs.com/yoyotl/p/7826255.html)，在此就不详细展开

有许多人使用Yarn进行包管理（本人也是使用的yarn）,[Yarn官方](https://yarn.bootcss.com/)说Yarn具有速度快、可靠等优点，其实也就是王婆卖瓜--自卖自夸。yarn跟npm使用哪个取决于喜好，就像有人喜欢安卓手机，有人喜欢苹果手机一样。日常使用yarn与npm只不过语法单词有些差别<font style="color:#f03d3d">npm install</font>、<font style="color:#f03d3d">yarn add</font> 

> 注意：yarn官方下载安装程序页面404了，诸君可以去[GitHub](https://github.com/yarnpkg/yarn/tags)下载



### package.json



#### package.json文件是什么

package.json文件是库（项目）的配置文件，文件中具有库的基本信息（包名称、作者、版本等）、依赖包等信息。

使用<font style="color:#f03d3d">yarn init</font>/<font style="color:#f03d3d">npm init</font>  进行创建package.json文件

<img src=".//images//image-2020121533123.png" width="400">



可以看到在初始化库（项目）的时候填写的都是基本信息，而这些基本信息就是当前包的描述。初始化完成之后会在当前目录下创建一个package.json的文件，此文件就是配置文件，里面包含了初始化时的基本信息。这些基本信息其实只有在包发布时才用得到，自己创建项目学习的时候不需要理会这些信息。

package.json文件创建完成之后Node其实会将当前package文件所在的目录默认为一个<font style="color:#f03d3d">模块（Module）</font> 也就是一个库（项目），package.json也就是当前是库（项目）的配置文件，在此目录下安装或者卸载包都是对于package.json文件的修改。在使用vue-cli、react-cli或者拉下来其它的项目第一步的<font style="color:#f03d3d">yarn install</font>/<font style="color:#f03d3d">npm install</font>就是以package.json文件依赖的包去拉到当前模块使用

> 模块（Module）引用的外部包存放在node_modules目录下，此目录由于存放所以外部包所以会占用大量磁盘。使用GIT项目管理时要忽略此目录



#### 添加依赖包

在使用层面模块（Module）将包分为生产环境依赖和开发环境依赖，在package.json中分别在<font style="color:#f03d3d">dependencies</font>和<font style="color:#f03d3d">devDependencies</font>属性下，生产环境包比较好理解，就是写代码在运行时使用到的，例如Jquery、vue等，都是在实际代码使用到的，至于开发环境依赖的包，则是参与打包器等一系列的包，这种包在后面会详细讲解。

添加依赖包的命令为 <font style="color:#f03d3d">yarn add  [-D]  pack-name</font>/<font style="color:#f03d3d">npm install [-D]  pack-name</font> 其中 -D 表示将包添加到开发环境依赖，默认则添加到生成环境依赖，例如我们添加JQuery和webpack。 其中JQuery为生成环境依赖，而webpack则是开发环境依赖

> yarn  add -D  webpack@5.4
>
> yarn add jquery

<img src=".//images//image-20201215142225233.png" width="400">

> 注意：webpack@5.4包表示添加的是5.4版本的webpack。webpack截至到目前最新版本为5.10.1 但是新版本某些功能具有一定的问题。

可以看到添加成功会在<font style="color:#f03d3d">dependencies</font>或<font style="color:#f03d3d">devDependencies</font>添加依赖包，并且在当前模块中可以使用这两个依赖包



#### scripts

在package.json中具有一个<font style="color:#f03d3d">scripts</font>的属性，这个属性的值跟<font style="color:#f03d3d">dependencies</font>一样也一个对象，对象的key代表命令语句，对象的value代表所执行的命令。例如我们在使用vue-cli时执行的<font style="color:#f03d3d">npm start</font>/<font style="color:#f03d3d">yarn start</font>或<font style="color:#f03d3d">yarn build</font>/<font style="color:#f03d3d">yarn build</font>时会启动项目或生成项目，其根据就是执行的<font style="color:#f03d3d">scripts</font>中的命令，<font style="color:#f03d3d">scripts</font>中的key和value都是可以随意进行设置的，你可以使用start执行node，甚至可以执行其他一切可执行程序，例如打开计算器（calc）

<img src=".//images//image-20201215142207386.png" width="400">





#### 其它

package.json中还具有其它属性，例如<font style="color:#f03d3d">browserslist</font>，这些属性在后面用到时再讲解，



#### 总结

package.json文件其实就是一个执行环境的配置文件，以package.json为根目录的目录为一个模块（Module），其模块的外部依赖包和执行命令全部有package文件承载。





### 本文参考

> * [Node.JS官网](https://nodejs.org/en/)
> * [NVM Github](https://github.com/nvm-sh/nvm)
> * [nvm安装和使用](https://www.cnblogs.com/gaozejie/p/10689742.html)
> * [npm使用国内镜像的方法](https://www.cnblogs.com/yoyotl/p/7826255.html)